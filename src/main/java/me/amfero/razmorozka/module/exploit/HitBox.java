package me.amfero.razmorozka.module.exploit;

import me.amfero.razmorozka.module.Category;
import me.amfero.razmorozka.module.Module;
import me.amfero.razmorozka.setting.Setting;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.util.math.AxisAlignedBB;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent;

public class HitBox extends Module {

	private final Setting size = new Setting("Size", this, 10, 2, 20);
    
	public HitBox(String name, String description, Category category) {
		super(name, description, category);
		addSetting(size);
	}
	
	@SubscribeEvent
    public void onUpdate(final TickEvent.ClientTickEvent event) {
		if(mc.world == null || mc.player == null) return;
        mc.world.loadedEntityList.stream().forEach(entity -> {
            if (entity == null && entity == mc.player && !(entity instanceof EntityPlayer)) return;
            for (Object object : mc.world.loadedEntityList) {
                if (object != null && object != mc.player && object instanceof EntityPlayer) {
                    EntityPlayer player = (EntityPlayer) object;
                    player.setEntityBoundingBox
                    (
                        new AxisAlignedBB
                        (
                            player.posX - size.getIntegerValue() / 10F,
                            player.getEntityBoundingBox().minY,
                            player.posZ - size.getIntegerValue() / 10F,
                            player.posX + size.getIntegerValue() / 10F,
                            player.getEntityBoundingBox().maxY,
                            player.posZ + size.getIntegerValue() / 10F
                        )
                    );
                }
            }
        });
	}
}
